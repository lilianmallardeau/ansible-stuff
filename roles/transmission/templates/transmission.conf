<VirtualHost *:80>
	ServerName {{ transmission_reverse_proxy_domain_name }}
	Redirect permanent / https://{{ transmission_reverse_proxy_domain_name }}/
</VirtualHost>

<VirtualHost *:443>
	ServerName  {{ transmission_reverse_proxy_domain_name }}

	ProxyPass "/" "http://localhost:{{ transmission_rpc_port }}/"
	ProxyPassReverse "/" "http://localhost:{{ transmission_rpc_port }}/"
	# ProxyPreserveHost On

	SSLCertificateFile /etc/letsencrypt/live/mallardeau.duckdns.org/fullchain.pem
	SSLCertificateKeyFile /etc/letsencrypt/live/mallardeau.duckdns.org/privkey.pem
	Include /etc/letsencrypt/options-ssl-apache.conf

	# <IfModule mod_headers.c>
	# 	# Header always set Strict-Transport-Security "max-age=15552000; includeSubDomains"
	# 	Header always set Strict-Transport-Security "max-age=15552000"
	# </IfModule>
</VirtualHost>
